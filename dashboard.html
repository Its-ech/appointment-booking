<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Dashboard</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body id="login-page"> <!-- استفاده از همان ID صفحه لاگین برای یکپارچگی -->
  <div class="dashboard-container">
    <h2 class="login-title">Welcome, <span id="user-name"></span></h2>
    <h3><span id="user-name"></span></h3>

    <div style="display: flex; flex-direction: column; align-items: center;">
      <a href="booking.html" class="btn">Book Appointment</a>
      <button id="history-btn" class="auth-btn blue-btn" style="display: none;">
        View Reservation History
    </button>
      <button id="logout-btn" class="btn-logout">Logout</button>
    </div>
  </div>

  <script>
    const currentUser = localStorage.getItem("currentUser");
    if (!currentUser) {
        window.location.href = "index.html"; 
    }
    document.getElementById("user-name").textContent = currentUser;
    const allReservations = JSON.parse(localStorage.getItem("reservations") || "[]");
    const userReservations = allReservations.filter(r => r.user === currentUser);

    if (userReservations.length > 0) {
        const btn = document.getElementById("history-btn");
        btn.innerText = `View Reservation History (${userReservations.length})`;
        btn.style.display = "inline-block";
        btn.onclick = () => window.location.href = "reservations.html";
       }
  </script>
  
  <script src="auth.js"></script>
</body>
</html>